<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Movies Streaming Service">
    <meta name="author" content="Abhijeet Singh">
    <link rel="icon" href="static/images/favicon.jpg">

    <title>Movie Stream</title>

    <!-- Bootstrap core CSS -->
    <link href="static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="static/css/blog.css" rel="stylesheet">
    <link href="static/css/carousel.css" rel="stylesheet">
    <link href="static/css/album.css" rel="stylesheet">

    <style id="style-1-cropbar-clipper">
        /* Copyright 2014 Evernote Corporation. All rights reserved. */
        .en-markup-crop-options {
            top: 18px !important;
            left: 50% !important;
            margin-left: -100px !important;
            width: 200px !important;
            border: 2px rgba(255, 255, 255, .38) solid !important;
            border-radius: 4px !important;
        }

        .en-markup-crop-options div div:first-of-type {
            margin-left: 0px !important;
        }

        .carousel-lend-poster {
            position: absolute;
            left: 0px;
            margin-top: 20px;
            z-index: 100;
            box-shadow: 0px 4px 16px 0px rgba(0, 0, 0, 0.32);
        }

        .carousel-lside-poster {
            position: absolute;
            margin-top: 10px;
            /* left: 250px; */
            left: 3.7em;
            z-index: 200;
            box-shadow: 0px 4px 16px 0px rgba(0, 0, 0, 0.32);
        }

        .carousel-rend-poster {
            position: absolute;
            /* left: 1080px; */
            left: 18.8em;
            margin-top: 20px;
            z-index: 100;
            box-shadow: 0px 4px 16px 0px rgba(0, 0, 0, 0.32);
        }

        .carousel-rside-poster {
            position: absolute;
            /* left: 810px; */
            left: 13.8em;
            margin-top: 10px;
            z-index: 200;
            box-shadow: 0px 4px 16px 0px rgba(0, 0, 0, 0.32);
        }

        .carousel-center-poster {
            position: absolute;
            /* left: 520px; */
            left: 8.2em;
            z-index: 300;
            box-shadow: 0px 4px 16px 0px rgba(0, 0, 0, 0.32);
        }

        #pag-btn {
            color: #007bff;
            background-color: transparent;
            background-image: none;
            border-color: #007bff;
        }

        #pag-btn:hover {
            color: #fff;
            background-color: #007bff;
            background-image: none;
            border-color: #007bff;
        }

        .navbar-nav li a {
            cursor: pointer;
        }

        .popGenre {
            color: rgb(0, 0, 0);
            cursor: pointer;
            word-wrap: normal;
        }

        .popGenre:hover {
            color: #007bff;
        }

        #searchListItems:hover {
            text-decoration: none;
        }

        .extreme-poster {
            width: 5em;
            height: 7.6em;
        }

        .intermediate-poster {
            width: 5.9em;
            height: 9em;
        }

        .center-poster {
            width: 7em;
            height: 10.4em;
        }

        .carousel-item {
            height: 11.3rem;
        }

        #myCarousel {
            margin-top: 32px;
            margin-bottom: 32px;
        }

        .card.flex-md-row,
        .card-img-right {
            border-bottom-right-radius: 55px;
        }

        .card-img-right {
            width: 100%;
            height: 485px;
        }

        .card-img-top {
            height: 485px;
            width: 100%;
            display: block;
        }

        @media (min-width: 576px) {}

        @media (min-width: 768px) {}

        @media (min-width: 992px) {
            .carousel-lside-poster {
                /* left: 250px; */
                left: 15.7em;
            }

            .carousel-rside-poster {
                /* left: 810px; */
                left: 50.6em;
            }

            .carousel-rend-poster {
                /* left: 1080px; */
                left: 67.8em;
            }

            .carousel-center-poster {
                /* left: 520px; */
                left: 32.6em;
            }

            .extreme-poster {
                /* width: 280px;
            height: 410px; */
                width: 16.6em;
                height: 25.6em;
            }

            .intermediate-poster {
                /* width: 285px;
            height: 430px; */
                width: 17.9em;
                height: 26.9em;
            }

            .center-poster {
                /* width:320px;
            height:450px; */
                width: 19em;
                height: 28.2em;
            }

            .carousel-item {
                height: 29.2rem;
            }

            #myCarousel {
                margin-top: 60px;
                margin-bottom: 60px;
            }

            .card.flex-md-row,
            .card-img-right {
                border-bottom-right-radius: .25rem;
            }

            .card-img-right {
                width: 200px;
                height: 280px;
            }

            .card-img-top {
                height: 346px;
                width: 100%;
                display: block;
            }
        }

        @media (min-width: 1200px) {}
    </style>
</head>

<body>

    <header>
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
            <a class="navbar-brand" href="index.html">Movie Stream</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav mr-auto">
                    <!-- <li class="nav-item active">
                        <a class="nav-link" href="index.html">HOME <span class="sr-only">(current)</span></a>
                    </li> -->
                    <li id="nav-genre" class="nav-item">
                        <a id="genrePopover" class="nav-link" data-container="body" data-toggle="popover" title="Genres"
                            data-html="true" data-placement="bottom"
                            data-content="<div class='row'><div class='col-md-6'><a class='nav-link popGenre' href='index.html?genre=ACTION'>Action</a><a class='nav-link popGenre' href='index.html?genre=ADVENTURE'>Adventure</a><a class='nav-link popGenre' href='index.html?genre=ANIMATION'>Animation</a><a class='nav-link popGenre' href='index.html?genre=BIOGRAPHY'>Biography</a><a class='nav-link popGenre' href='index.html?genre=COMEDY'>Comedy</a><a class='nav-link popGenre' href='index.html?genre=CRIME'>Crime</a><a class='nav-link popGenre' href='index.html?genre=DRAMA'>Drama</a><a class='nav-link popGenre' href='index.html?genre=FAMILY'>Family</a><a class='nav-link popGenre' href='index.html?genre=FANTASY'>Fantasy</a></div><div class='col-md-6'><a class='nav-link popGenre' href='index.html?genre=HISTORY'>History</a><a class='nav-link popGenre' href='index.html?genre=HORROR'>Horror</a><a class='nav-link popGenre' href='index.html?genre=MYSTERY'>Mystery</a><a class='nav-link popGenre' href='index.html?genre=MUSIC'>Music</a><a class='nav-link popGenre' href='index.html?genre=ROMANCE'>Romance</a><a class='nav-link popGenre' href='index.html?genre=THRILLER'>Thriller</a><a class='nav-link popGenre' href='index.html?genre=SCI-FI'>Sci-Fi</a><a class='nav-link popGenre' href='index.html?genre=SPORT'>Sport</a><a class='nav-link popGenre' href='index.html?genre=WESTERN'>Western</a></div></div>">GENRE</a>
                    </li>

                    <li id="nav-favorite" class="nav-item">
                        <a class="nav-link" href="index.html?genre=FAVORITE">FAVORITE</a>
                    </li>
                    <li class="nav-item" style="cursor:default">
                        <a class="nav-link" style="cursor:default">|</a>
                    </li>
                    <li id="nav-action" class="nav-item">
                        <a class="nav-link" href='index.html?genre=ACTION'>ACTION</a>
                    </li>
                    <li id="nav-adventure" class="nav-item">
                        <a class="nav-link" href='index.html?genre=ADVENTURE'>ADVENTURE</a>
                    </li>
                    <li id="nav-animation" class="nav-item">
                        <a class="nav-link" href='index.html?genre=ANIMATION'>ANIMATION</a>
                    </li>
                    <li id="nav-comedy" class="nav-item">
                        <a class="nav-link" href='index.html?genre=COMEDY'>COMEDY</a>
                    </li>
                    <li id="nav-drama" class="nav-item">
                        <a class="nav-link" href='index.html?genre=DRAMA'>DRAMA</a>
                    </li>
                    <li id="nav-romance" class="nav-item">
                        <a class="nav-link" href='index.html?genre=ROMANCE'>ROMANCE</a>
                    </li>
                    <li id="nav-horror" class="nav-item">
                        <a class="nav-link" href='index.html?genre=HORROR'>HORROR</a>
                    </li>
                    <li id="nav-sci-fi" class="nav-item">
                        <a class="nav-link" href='index.html?genre=SCI-FI'>SCI-FI</a>
                    </li>

                </ul>
                <img src="static/images/ic_search_white.png" onclick="showSearchModal()" style="cursor:pointer">
            </div>
        </nav>
    </header>
    <div id="myCarousel" class="carousel slide" data-ride="carousel">

        <!-- Wrapper for slides -->
        <div id="carousel-holder" class="carousel-inner">

        </div>

        <!-- Left and right controls -->
        <a class="carousel-control-prev" style="width:5%" href="#myCarousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" style="width:5%" href="#myCarousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>

    <!--Movie Content (2 Card Displays)-->
    <div id="container" class="container">
    </div>

    <!--Favorite or Recent Movie Content (4 Card Display)-->
    <div class="album py-5" style="background-color:#fff">
        <div id="newContainer" class="container">
        </div>
    </div>

    <footer class="blog-footer">
        <p>
            © 2020, Movie Stream
        </p>
    </footer>



    <!--Search Modal-->
    <div id="searchModal" class="modal fade" role="dialog">
        <div class="modal-dialog" role="document">

            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title" style="font-size:18px;font-family:Andalus;font-face:plain;color:#d9534f">
                        Search Movies</h1>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <input id="searchText" class="form-control mr-sm-2" placeholder="Search Movies"
                        onkeyup="searchMovies(event)">
                    <div class="container">
                        <ul id="searchList" style="list-style:none;padding:5px;text-decoration:none;"></ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" onclick="load_gallery()" data-dismiss="modal">Load
                            Movies</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="static/js/jquery-3.2.1.slim.min.js"></script>
    <script src="static/js/popper.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
    <script src="static/js/main-content.js"></script>
    <script src="static/js/content.js"></script>

    <script>
        function searchMovies(event) {
            let k = event.keyCode;
            console.log(k);
            let text = document.getElementById("searchText").value;
            console.log("Search For: " + text + " | ----------------------------");
            document.getElementById("searchList").innerHTML = "";
            let listItems = "";

            if ((k >= 65 && k <= 90) || (k >= 48 && k <= 57) || (k >= 96 && k <= 105) || k == 219 || k == 221) {//work only for [a-z0-9]
                for (let i = 0; i < movieContent.length; i++) {
                    let movie = movieContent[i].title.toLowerCase();
                    if (k == 219) {
                        let option = text.substring(text.indexOf("[") - 1, text.indexOf("["));
                        if (option == "y" || option == "Y") {
                            movie = movieContent[i].year.toString();
                        } else if (option == "c" || option == "C") {
                            movie = movieContent[i].cast.toLowerCase();
                        } else if (option == "i" || option == "I") {
                            movie = movieContent[i].imdb.toString();
                        } else if (option == "r" || option == "R") {
                            movie = movieContent[i].rated.toLowerCase();
                        } else if (option == "h" || option == "H") {
                            movie = movieContent[i].hd.toLowerCase();
                        }
                    }
                    if (movie.indexOf(text.toLowerCase()) >= 0) {
                        //console.log(movieContent[i].title+" ("+movieContent[i].year+")");
                        listItems += '<li><a target="blank" id="searchListItems" href="movie.html?movie=' + movieContent[i].title + ' (' + movieContent[i].year + ')">' + movieContent[i].title + ' (' + movieContent[i].year + ')</a></li>';
                    }
                }
                document.getElementById("searchList").innerHTML = listItems;
            } else if (k == 8) {//re-search on backspace
                for (let i = 0; i < movieContent.length; i++) {
                    let movie = movieContent[i].title.toLowerCase();
                    if (movie.indexOf(text.toLowerCase()) >= 0) {
                        //console.log(movieContent[i].title+" ("+movieContent[i].year+")");
                        listItems += '<li><a target="blank" id="searchListItems" href="movie.html?movie=' + movieContent[i].title + ' (' + movieContent[i].year + ')">' + movieContent[i].title + ' (' + movieContent[i].year + ')</a></li>';
                    }
                }
                document.getElementById("searchList").innerHTML = listItems;

            } else if (k == 13) {//for enter
                for (let i = 0; i < movieContent.length; i++) {
                    let movie = movieContent[i].title.toLowerCase();
                    if (movie.indexOf(text.toLowerCase()) >= 0) {
                        //console.log(movieContent[i].title+" ("+movieContent[i].year+")");
                        listItems += '<li><a target="blank" id="searchListItems" href="movie.html?movie=' + movieContent[i].title + ' (' + movieContent[i].year + ')">' + movieContent[i].title + ' (' + movieContent[i].year + ')</a></li>';
                    }
                }
                document.getElementById("searchList").innerHTML = listItems;

            }
            //a-z[65-90]
            //0-9[48-57]
            //enter 13
            //space 32
            //[ 219
            //] 221
        }
    </script>
    <script>
        let GENRES = ["ACTION", "ADVENTURE", "ANIMATION", "BIOGRAPHY", "COMEDY", "CRIME", "DRAMA", "FAMILY", "FANTASY", "HISTORY", "HORROR", "MYSTERY", "MUSIC", "ROMANCE", "THRILLER", "SCI-FI", "SPORT", "WESTERN" ];
        let showRestricted = false;
        let genrePremiers = [], genreAdditions = [];
        let premiersIndex = 0, additionsIndex = 0;
        let premiersLimit = 12, additionsLimit = 12;

        $(document).ready(function () {
            let uri = decodeURI(window.location.href);
            let genre = "";
            if (uri.indexOf("?genre=") > 0) {
                genre = uri.substring(uri.indexOf("?genre=") + 7);
            }
            prepareData();
            displayData(genre);

            $('[data-toggle="popover"]').popover();
            $('body').click(function (e) {
                if (e.target.id != "genrePopover") {
                    $('[data-toggle="popover"]').popover('hide');
                }
            });
        }
        );

        function prepareData() {
            CONTENT["premiers"] = [];
            CONTENT["additions"] = [];
            CONTENT["genres"] = {};

            let genre;
            for (mid in CONTENT["movies"]) {
                if (isRestricted(mid) && !showRestricted) {
                    continue;
                }
                CONTENT["premiers"].push(mid);
                CONTENT["additions"].push(mid);
                for (g of CONTENT["movies"][mid]["genre"].split(", ")) {
                    genre = g.toUpperCase();
                    if (!(genre in CONTENT["genres"])) {
                        CONTENT["genres"][genre] = [];
                    }
                    CONTENT["genres"][genre].push(mid);
                }
            }
            CONTENT["premiers"].sort((a, b) => {
                if (CONTENT["movies"][a]["year"] > CONTENT["movies"][b]["year"]) {
                    return -1;
                } else if (CONTENT["movies"][a]["year"] < CONTENT["movies"][b]["year"]) {
                    return 1;
                } else {
                    if (a > b) {
                        return -1;
                    } else if (a < b) {
                        return 1;
                    } else {
                        return 0;
                    }
                }
            });
            CONTENT["additions"].sort().reverse();
            CONTENT["favorites"].sort((a, b) => {
                if (CONTENT["movies"][a]["year"] > CONTENT["movies"][b]["year"]) {
                    return -1;
                } else if (CONTENT["movies"][a]["year"] < CONTENT["movies"][b]["year"]) {
                    return 1;
                } else {
                    if (CONTENT["movies"][a]["imdb"] > CONTENT["movies"][b]["imdb"]) {
                        return -1;
                    } else if (CONTENT["movies"][a]["imdb"] < CONTENT["movies"][b]["imdb"]) {
                        return 1;
                    } else {
                        return 0;
                    }
                }
            });
        }

        function prepareGenreData(genre) {
            genrePremiers = Array.prototype.slice.call(CONTENT["genres"][genre]).sort((a, b) => {
                if (CONTENT["premiers"].indexOf(a) < CONTENT["premiers"].indexOf(b)) {
                    return -1;
                } else if (CONTENT["premiers"].indexOf(a) > CONTENT["premiers"].indexOf(b)) {
                    return 1;
                } else {
                    return 0;
                }
            });
            genreAdditions = Array.prototype.slice.call(CONTENT["genres"][genre]).sort().reverse();
        }

        function displayData(genre) {
            switch (genre) {
                case "FAVORITE": loadFavorite();
                    break;
                default:
                    if (GENRES.indexOf(genre) > -1) {
                        loadGenre(genre);
                    } else {
                        loadHome();
                    }
                    break;
            }
        }

        function loadHome() {
            $("#carousel-holder").css("display", "block");
            $(".album.py-5").css("display", "block");
            premiersIndex = 0;
            additionsIndex = 0;
            loadCarousel(CONTENT["premiers"].slice(premiersIndex, 15));
            loadPremiers("HOLLYWOOD MOVIES PREMIER", CONTENT["premiers"].slice(premiersIndex, premiersIndex + premiersLimit), "");
            loadAdditions("RECENT ADDITIONS", CONTENT["additions"].slice(additionsIndex, additionsIndex + additionsLimit), "");
            if (CONTENT["premiers"].length <= premiersLimit) {
                $("#loadMorePremiersDiv a").css("display", "none");
            }
            if (CONTENT["additions"].length <= additionsLimit) {
                $("#loadMoreAdditionsDiv a").css("display", "none");
            }
            premiersIndex += premiersLimit;
            additionsIndex += additionsLimit;
        }

        function loadFavorite() {
            $("#carousel-holder").css("display", "none");
            $(".album.py-5").css("display", "none");

            $(".navbar-nav li").removeClass("active");
            $("#nav-favorite").addClass("active");

            premiersIndex = 0;

            loadPremiers("FAVORITE HOLLYWOOD MOVIES", CONTENT["favorites"].slice(premiersIndex, premiersIndex + premiersLimit), "FAVORITE");
            if (CONTENT["favorite"].length <= premiersLimit) {
                $("#loadMorePremiersDiv a").css("display", "none");
            }
            premiersIndex += premiersLimit;
        }

        function loadGenre(genre) {
            $("#carousel-holder").css("display", "block");
            $(".album.py-5").css("display", "block");

            $(".navbar-nav li").removeClass("active");
            $("#nav-" + genre.toLowerCase()).addClass("active");

            prepareGenreData(genre);

            premiersIndex = 0;
            additionsIndex = 0;
            loadCarousel(genrePremiers.slice(premiersIndex, 15));
            loadPremiers(genre + " MOVIES PREMIER", genrePremiers.slice(premiersIndex, premiersIndex + premiersLimit), genre);
            loadAdditions("RECENT ADDITIONS TO " + genre, genreAdditions.slice(additionsIndex, additionsIndex + additionsLimit), genre);
            if (genrePremiers.length <= premiersLimit) {
                $("#loadMorePremiersDiv a").css("display", "none");
            }
            if (genreAdditions.length <= additionsLimit) {
                $("#loadMoreAdditionsDiv a").css("display", "none");
            }
            premiersIndex += premiersLimit;
            additionsIndex += additionsLimit;
        }

        function loadCarousel(mids) {
            // 5 Posters per Carousel Page
            let postersLimit = 5, pages = 0, maxPages = 3;
            let carousel_content = '';
            if (mids.length >= postersLimit) {
                pages = parseInt(mids.length / postersLimit);
                if (pages > maxPages) {
                    pages = maxPages;
                }
                let activeClass;
                let carouselClass;
                let carouselPosterClass;
                let midIndex = 0;
                let movie;
                for (let a = 0; a < pages; a++) {
                    activeClass = '';
                    if (a == 0) {
                        activeClass = "active";
                    }
                    carousel_content += '<div class="carousel-item ' + activeClass + '" align="center" style="background-color:transparent"><div class="row">';

                    for (let i = 0; i < postersLimit; i++) {
                        movie = CONTENT["movies"][mids[midIndex]];
                        midIndex += 1;
                        switch (i) {
                            case 3:
                                carouselClass = "carousel-lend-poster";
                                carouselPosterClass = "extreme-poster";
                                break;
                            case 1:
                                carouselClass = "carousel-lside-poster";
                                carouselPosterClass = "intermediate-poster";
                                break;
                            case 0:
                                carouselClass = "carousel-center-poster";
                                carouselPosterClass = "center-poster";
                                break;
                            case 2:
                                carouselClass = "carousel-rside-poster";
                                carouselPosterClass = "intermediate-poster";
                                break;
                            case 4:
                                carouselClass = "carousel-rend-poster";
                                carouselPosterClass = "extreme-poster";
                                break;
                        }
                        carousel_content +=
                            '<div class="' + carouselClass + '"> \
                                            <a target="blank" href="movie.html?movie=' + movie.title + ' (' + movie.year + ')"> \
                                                <img class="'+ carouselPosterClass + '" src="static/images/posters/' + movie.title + ' (' + movie.year + ').jpg" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="' + movie.title + ' (' + movie.year + ')"> \
                                            </a> \
                                        </div>';
                    }
                    carousel_content += '</div></div>';
                }
            }
            if (carousel_content == "") {
                $("#carousel-holder").css("display", "none");
            } else {
                document.getElementById("carousel-holder").innerHTML = carousel_content;
            }
        }

        function loadPremiers(title, mids, type) {
            let container_content =
                '<div class="row jumbotron p-3 p-md-5 text-white rounded" style="background:url(static/images/blue-abs.jpg);margin-bottom:30px"> \
                <div class="col-md-6 px-0"> \
                    <h1 class="display-4 font-italic">'+ title + '</h1> \
                    <p class="lead mb-0"> \
                        <a href="#container" class="text-white font-weight-bold">WATCH NOW...</a> \
                    </p> \
                </div> \
                <div class="col-md-6"> \
                    <img id="sortOrder" src="static/images/ic_sort.png" style="cursor:pointer;float:right" title="Filter" data-toggle="popover" data-trigger="" data-container="body" data-placement="left" data-html="true" data-content=\'<div class="row"><div class="col-md-6"><span>A-Z</span><span>IMDB Rating</span></div><div class="col-md-6"><input type="checkbox"><input type="checkbox"></div></div>\'> \
                </div> \
            </div>';

            container_content += loadPremiersContent(mids);

            container_content +=
                '<nav id="loadMorePremiersDiv" class="blog-pagination" align="center"> \
                    <a id="pag-btn" class="btn" onclick="loadMorePremiers(\''+ type + '\')">Load More</a> \
                </nav>';

            document.getElementById("container").innerHTML = container_content;

        }

        function loadAdditions(title, mids, type) {
            let container_content =
                '<div class="jumbotron p-3 p-md-5 text-white rounded" style="background:url(static/images/yellow-band.jpg);margin-bottom:30px"> \
                    <div class="col-md-6 px-0"> \
                        <h1 class="display-4 font-italic">'+ title + '</h1> \
                    </div> \
                </div>';

            container_content += loadAdditionsContent(mids);

            container_content +=
                '<nav id="loadMoreAdditionsDiv" class="blog-pagination" align="center"> \
                    <a id="pag-btn" class="btn" onclick="loadMoreAdditions(\''+ type + '\')">Load More</a> \
                </nav>';

            document.getElementById("newContainer").innerHTML = container_content;

        }

        function loadPremiersContent(mids) {
            // 2 Movies per Row
            let container_content = '';
            let movie;
            let imdbClass, ratingClass;
            let i = 0;
            for (; i < mids.length; i++) {
                movie = CONTENT["movies"][mids[i]];
                if (i % 2 == 0) {
                    container_content += '<div class="row mb-2">';
                }
                container_content +=
                    '<div class="col-md-6"> \
                                <div class="card flex-md-row mb-4 box-shadow h-md-280"> \
                                    <div class="card-body d-flex flex-column align-items-start"> \
                                        <strong class="d-inline-block mb-2 text-primary">' + movie.genre + '</strong> \
                                        <h3 class="mb-0"> \
                                            <a class="text-dark" target="blank" href="movie.html?movie=' + movie.title + ' (' + movie.year + ')">' + movie.title + '</a> \
                                        </h3> \
                                    <div class="mb-1 text-muted">' + movie.year + ' | IMDB: ';

                imdbClass = "text-muted";
                if (movie.imdb >= 6.5) {
                    imdbClass = "text-success";
                } else if (movie.imdb < 5) {
                    imdbClass = "text-danger";
                }
                container_content += '<strong class="' + imdbClass + '">' + movie.imdb + '</strong></div>';

                ratingClass = "text-info";
                if (movie.rated == "R") {
                    ratingClass = "text-danger";
                } else if (movie.rated == "M") {
                    ratingClass = "text-warning";
                }
                container_content += '<div class="mb-1 ' + ratingClass + '">' + movie.rated + '</div>';

                container_content +=
                    '<p class="card-text mb-auto"> \
                                <b class="text-secondary">Cast:</b> ' + movie.cast + ' \
                            </p></div> \
                            <a class="card-img-side" target="blank" href="movie.html?movie=' + movie.title + ' (' + movie.year + ')"> \
                                <img class="card-img-right flex-auto d-md-block" src="static/images/posters/' + movie.title + ' (' + movie.year + ').jpg" data-holder-rendered="true"> \
                            </a> \
                            </div></div>';


                if (i % 2 != 0) {
                    container_content += '</div>';
                }
            }
            if (i % 2 != 0) {
                container_content += '</div>';
            }
            
            return container_content;
        }

        function loadAdditionsContent(mids) {
            // 4 Movies per Row
            let container_content = '';
            let movie;
            let favoriteClass, ratingClass, imdbClass;
            let i = 0;
            for (; i < mids.length; i++) {
                movie = CONTENT["movies"][mids[i]];
                if (i % 4 == 0) {
                    container_content += '<div class="row">';
                }

                container_content +=
                    '<div class="col-md-3"> \
                        <div class="card mb-4 box-shadow"> \
                            <a target="blank" href="movie.html?movie=' + movie.title + ' (' + movie.year + ')"> \
                                <img class="card-img-top" src="static/images/posters/' + movie.title + ' (' + movie.year + ').jpg" data-holder-rendered="true" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="' + movie.title + ' (' + movie.year + ')"> \
                            </a> \
                            <div class="card-body"> \
                                <p class="card-text">Year: ' + movie.year + '<br/>Genre: ' + movie.genre + '<br/><strong class="text-muted">Cast:</strong> ' + movie.cast + ' \
                                </p> \
                                <div class="d-flex justify-content-between align-items-center"> \
                                    <div class="btn-group">';
                favoriteClass = "btn-outline-secondary";
                if (isFavorite(mids[i])) {
                    favoriteClass = "btn-outline-danger";
                }
                container_content += '<button type="button" class="btn btn-sm ' + favoriteClass + '" disabled>Favorite</button>';

                ratingClass = "btn-outline-info";
                if (movie.rated == "R") {
                    ratingClass = "btn-outline-danger";
                } else if (movie.rated == "M") {
                    ratingClass = "btn-outline-warning";
                }
                container_content += '<button type="button" class="btn btn-sm ' + ratingClass + '" disabled>' + movie.rated + '</button></div>';

                imdbClass = "text-muted";
                if (movie.imdb >= 6.5) {
                    imdbClass = "text-success";
                } else if (movie.imdb < 5) {
                    imdbClass = "text-danger";
                }
                container_content += '<small class="text-muted">IMDB: \
                    <strong class="'+ imdbClass + '">' + movie.imdb + '</strong> \
                    </small> \
                    </div></div></div></div>';

                if (i % 4 == 3) {
                    container_content += '</div>';
                }
            }
            if (i % 4 !== 0) {
                container_content += '</div>';
            }

            return container_content;
        }

        function loadMorePremiers(type) {
            let moreContent = '';
            let endIndex = premiersIndex + premiersLimit;
            if (type == "FAVORITE") {
                moreContent = loadPremiersContent(CONTENT["favorites"].slice(premiersIndex, endIndex));
                if (endIndex >= CONTENT["favorites"].length) {
                    $("#loadMorePremiersDiv a").css("display", "none");
                }
            } else if (GENRES.indexOf(type) > -1) {
                moreContent = loadPremiersContent(genrePremiers.slice(premiersIndex, endIndex));
                if (endIndex >= genrePremiers.length) {
                    $("#loadMorePremiersDiv a").css("display", "none");
                }
            } else {
                moreContent = loadPremiersContent(CONTENT["premiers"].slice(premiersIndex, endIndex));
                if (endIndex >= CONTENT["premiers"].length) {
                    $("#loadMorePremiersDiv a").css("display", "none");
                }
            }

            $(moreContent).insertBefore("#loadMorePremiersDiv");
            premiersIndex = endIndex;
        }

        function loadMoreAdditions(type) {
            let moreContent = '';
            let endIndex = additionsIndex + additionsLimit;

            if (GENRES.indexOf(type) > -1) {
                moreContent = loadAdditionsContent(genreAdditions.slice(additionsIndex, endIndex));
                if (endIndex >= genreAdditions.length) {
                    $("#loadMoreAdditionsDiv a").css("display", "none");
                }
            } else {
                moreContent = loadAdditionsContent(CONTENT["additions"].slice(additionsIndex, endIndex));
                if (endIndex >= CONTENT["additions"].length) {
                    $("#loadMoreAdditionsDiv a").css("display", "none");
                }
            }

            $(moreContent).insertBefore("#loadMoreAdditionsDiv");
            additionsIndex = endIndex;
        }

        function isFavorite(mid) {
            if (CONTENT["favorites"].indexOf(mid) > -1) {
                return true;
            }
            return false;
        }

        function isRestricted(mid) {
            if (CONTENT["restricted"].indexOf(mid) > -1) {
                return true;
            }
            return false;
        }

        function showSortOrder() {
            $('#sortOrder').popover('show');
        }

        function showSearchModal() {
            $("#searchModal").modal();
        }

    </script>

</body>

</html>